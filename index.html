<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Collecting Data</title>
	<script src=
"https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
	</script>

	<link rel="stylesheet" href=
"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
		integrity=
"sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
		crossorigin="anonymous">
</head>

<body class="container" style="margin-top: 50px;
	width: 50%; height:auto;">
	
    <h1>Submit Your Speech</h1>
    <form id="speechForm">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required>
        <br><br>
        <label for="text">Speech:</label>
        <textarea id="text" name="text" rows="10" cols="30" required></textarea>
        <br><br>
        <button type="button" onclick="submitSpeech()">Submit</button>
    </form>

    <h2>List of Speeches</h2>
    <div id="speechList"></div>

	<script>

  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyBx97x-JufARMMPekWkRGT_6Flfid2DDR8",
    authDomain: "vydamore-ea949.firebaseapp.com",
    databaseURL: "https://vydamore-ea949-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "vydamore-ea949",
    storageBucket: "vydamore-ea949.appspot.com",
    messagingSenderId: "363045889390",
    appId: "1:363045889390:web:ade4517744f380e40f8d7f",
    measurementId: "G-0H8E7EQZ9M"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);


		// Initialize Realtime Database
const database = firebase.database();

// Function to submit the speech
function submitSpeech() {
    const name = document.getElementById('name').value;
    const text = document.getElementById('text').value;

    if (name && text) {
        // Get a new key for the speech
        const newSpeechRef = database.ref('speeches').push();
        // Store the speech
        newSpeechRef.set({
            name: name,
            text: text
        });
        // Clear the form
        document.getElementById('speechForm').reset();
    } else {
        alert('Please fill out both fields.');
    }
}

// Function to display the list of speeches
function displaySpeeches() {
    const speechList = document.getElementById('speechList');
    speechList.innerHTML = ''; // Clear the list before updating

    // Get all speeches
    database.ref('speeches').once('value', snapshot => {
        snapshot.forEach(childSnapshot => {
            const speech = childSnapshot.val();
            const speechItem = document.createElement('div');
            speechItem.innerHTML = `<strong>${speech.name}:</strong> <p>${speech.text}</p>`;
            speechList.appendChild(speechItem);
        });
    });
}

// Load speeches when the page is loaded
window.onload = displaySpeeches;





        // Function to load speeches from localStorage
function loadSpeeches() {
    const storedSpeeches = localStorage.getItem('speeches');
    if (storedSpeeches) {
        speeches = JSON.parse(storedSpeeches);
    }
    displaySpeeches();
}

// Function to save speeches to localStorage
function saveSpeeches() {
    localStorage.setItem('speeches', JSON.stringify(speeches));
}

// Function to submit the speech
function submitSpeech() {
    const name = document.getElementById('name').value;
    const text = document.getElementById('text').value;

    if (name && text) {
        // Store the speech
        speeches.push({ name, text });
        // Save to localStorage
        saveSpeeches();
        // Clear the form
        document.getElementById('speechForm').reset();
        // Update the speech list
        displaySpeeches();
    } else {
        alert('Please fill out both fields.');
    }
}

// Function to display the list of speeches
function displaySpeeches() {
    const speechList = document.getElementById('speechList');
    speechList.innerHTML = ''; // Clear the list before updating

    speeches.forEach(speech => {
        const speechItem = document.createElement('div');
        speechItem.innerHTML = `<strong>${speech.name}:</strong> <p>${speech.text}</p>`;
        speechList.appendChild(speechItem);
    });
}

// Load speeches when the page is loaded
window.onload = loadSpeeches;

	</script>
</body>

</html>
